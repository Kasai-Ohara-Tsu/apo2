{% extends "frontend/base.html" %}

{% block title %}通知完了 - 来客受付システム{% endblock %}

{% block content %}
<div class="container-wide text-center">
    <div style="font-size: 4rem; margin-bottom: 1rem;">✅</div>
    <h1 class="mb-3 text-color">{{ message_title }}</h1>
    <p class="lead mb-5 text-color">{{ message_lead }}</p>

    <a href="{% url 'frontend:index' %}" id="complete-btn"
        class="btn btn-primary-custom btn-large d-flex justify-content-center align-items-center mx-auto"
        style="width: 10rem; height: 3rem; font-size: 1.2rem;">
        完了
    </a>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Djangoからの変数を安全に取得
        const timeoutMillis = Number("{{ redirect_timeout_ms|default:120000 }}");
        const redirectUrl = "{% url 'frontend:index' %}";

        // 自動遷移の実行
        const timer = setTimeout(function () {
            window.location.href = redirectUrl;
        }, timeoutMillis);

        // ボタンが押されたらタイマーをクリア
        const btn = document.getElementById('complete-btn');
        if (btn) {
            btn.addEventListener('click', function () {
                clearTimeout(timer);
            });
        }
    });
</script>
{% endblock %}